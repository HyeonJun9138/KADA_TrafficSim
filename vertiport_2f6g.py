import matplotlib.pyplot as plt

###############################################################################
# 노드(좌표), 링크, 게이트
###############################################################################
ground_nodes = {
    "FATO_Landing": [0, 11], "FATO_Takeoff": [15, 11], "GATE2": [5, 0],
    "GATE3": [10, 0], "1": [0, 10], "2": [0, 9],
    "3": [0, 8], "4": [0, 7], "5": [0, 5],
    "50": [-1, 5], "51": [-3, 5], "52": [-3, 3], "53": [-2, 4],
    "54": [-3, 2], "55": [-3, 1], "56": [-3, 0], "GATE1": [-1, 0], "GATE4": [-1, 2],
    "9": [1, 6], "11": [2, 5], "12": [3, 5],
    "13": [4, 4], "14": [5, 5], "15": [5, 3], "16": [5, 2], "17": [5, 1],
    "18": [6, 4], "19": [7, 5], "20": [8, 5], "21": [9, 4], "22": [10, 5],
    "23": [10, 3], "24": [10, 2], "25": [10, 1],
    "26": [11, 4], "27": [12, 5],
    "28": [13, 5], "29": [14, 6], "31": [15, 10], "32": [15, 9],
    "33": [15, 8], "34": [15, 7], "35": [15, 5],
    "59": [16, 5], "60": [18, 5], "61": [17, 4], "62": [18, 3],
    "63": [18, 2], "64": [18, 1], "65": [18, 0],
    "GATE5": [16, 2], "GATE6": [16, 0]
}

# ground_links를 "노드: [인접 노드들]" 형태로 변경 (기존 7.5 거리 제거)
ground_links = {
    "FATO_Landing": ["1"],
    "1": ["FATO_Landing", "2"],
    "2": ["1", "3"],
    "3": ["2", "4"],
    "4": ["3", "5", "9"],
    "5": ["4", "11", "50"],
    "50": ["5", "51", "53"],
    "51": ["50", "52"],
    "52": ["51", "53", "54"],
    "53": ["50", "52"],
    "54": ["52", "55", "GATE4"],
    "55": ["54", "56"],
    "56": ["55", "GATE1"],
    "GATE1": ["56"],
    "9": ["4", "11"],
    "11": ["5", "9", "12"],
    "12": ["11", "13", "14"],
    "13": ["12", "15"],
    "14": ["12", "15", "19"],
    "15": ["13", "14", "16", "18"],
    "16": ["15", "17"],
    "17": ["16", "GATE2"],
    "GATE2": ["17"],
    "18": ["15", "19"],
    "19": ["14", "18", "20"],
    "20": ["19", "21", "22"],
    "21": ["20", "23"],
    "22": ["20", "23", "27"],
    "23": ["21", "22", "24", "26"],
    "24": ["23", "25"],
    "25": ["24", "GATE3"],
    "GATE3": ["25"],
    "26": ["23", "27"],
    "27": ["22", "26", "28"],
    "28": ["27", "29", "35"],
    "29": ["28", "34"],
    "FATO_Takeoff": ["31"],
    "31": ["FATO_Takeoff", "32"],
    "32": ["31", "33"],
    "33": ["32", "34"],
    "34": ["29", "33", "35"],
    "35": ["28", "34", "59"],
    "59": ["35", "60", "61"],
    "60": ["59", "62"],
    "61": ["59", "62"],
    "62": ["60", "61", "63"],
    "63": ["62", "64", "GATE5"],
    "GATE5": ["63"],
    "64": ["63", "65"],
    "65": ["64", "GATE6"],
    "GATE6": ["65"],
    "GATE4": ["54"]
}

gates = ["GATE1", "GATE2", "GATE3", "GATE4", "GATE5", "GATE6"]

###############################################################################
# 시각화 함수
###############################################################################
def plot_vertiport():
    fig, ax = plt.subplots(figsize=(6,6))
    
    # (1) 노드들 그리기
    for node_name, (x, y) in ground_nodes.items():
        # 게이트이면 빨간색 사각형, FATO이면 파란색 삼각형, 그 외는 검정 원
        if node_name in gates:
            color = "red"
            marker = "s"
        elif "FATO" in node_name:
            color = "blue"
            marker = "^"
        else:
            color = "black"
            marker = "o"

        ax.scatter(x, y, c=color, marker=marker, s=50)
        # 노드명 표시
        ax.text(x+0.1, y+0.1, node_name, fontsize=8)

    # (2) 링크들 그리기
    for src, neighbors in ground_links.items():
        if src not in ground_nodes:
            continue
        sx, sy = ground_nodes[src]
        for dst in neighbors:
            if dst not in ground_nodes:
                continue
            dx, dy = ground_nodes[dst]
            # 라인으로 연결
            ax.plot([sx, dx], [sy, dy], color="gray", linewidth=1)

    ax.set_aspect("equal", "box")
    ax.set_xlabel("X 좌표")
    ax.set_ylabel("Y 좌표")
    ax.set_title("Vertiport 2F-6G Layout")
    plt.tight_layout()
    plt.show()

def main():
    plot_vertiport()

if __name__ == "__main__":
    main()
